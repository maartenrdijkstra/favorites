<!DOCTYPE html>
<html lang="en" th="xmlns:https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Change User Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>

<form th:action="@{/change_details/update}" method="post" style="max-width: 750px; margin: 0 auto"
      enctype="multipart/form-data" class="text-center"
      th:object="${user}">
    <input type="hidden" th:field="*{id}"/>


    <br>
    <h2>Change User Details:</h2>

    <div th:if="${message != null}" class="alert alert-success text-center">
        [[${message}]]
    </div>
    <br>
    <label for="email">Email: </label><br><input type="email" id="email" th:field="*{email}" placeholder="Email"
                                                 required="required" minlength="7" maxlength="35">
    <br><br>
    <label for="username">Username: </label><br><input type="text" id="username" th:field="*{name}"
                                                       required="required" minlength="2" maxlength="70">
    <br><br>
    <label for="password">Password: </label><br> <input type="password" id="password" th:field="*{password}"
                                                        minlength="5" maxlength="20" oninput="checkPasswords()">
    <br><br>
    <label for="confirm">Confirm password: </label><br><input type="password" id="confirm" minlength="5"
                                                              maxlength="20" oninput="checkPasswords()">
    <br><br><br>
    <div class="text-center">
        <input type="submit" value="Update" class="btn btn-primary"/>
    </div>
</form>

<br>
<div class="text-center">
    <p>Back to <a th:href="@{/home}">Home Page</a></p>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
        crossorigin="anonymous"></script>
<script>
    function checkPasswords() {
        if (document.getElementById('confirm').value !== document.getElementById('password').value) {
            document.getElementById("confirm").setCustomValidity("Passwords do not match!");
        } else {
            document.getElementById("confirm").setCustomValidity("");
        }
    }
</script>
</body>
</html>